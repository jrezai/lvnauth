name: lvnauth
title: LVNAuth
summary: a visual novel creator and player
description: |
     LVNAuth lets you create and play visual novels.
     It includes a built-in editor for creating chapters, scenes,
     and for managing sprite images and simple animations.
version: '1.1'
base: core24
grade: stable
confinement: strict
issues: https://github.com/jrezai/lvnauth/issues
icon: snap/gui/lvnauth.png
license: LGPL-3.0-or-later
donation: https://lvnauth.org/pages/donate.html
website: https://lvnauth.org

platforms:
  amd64:
    build-on:
      - amd64
    build-for:
      - amd64

apps:
  lvnauth:
    command: bin/python3 $SNAP/src/startup.py
    desktop: snap/gui/lvnauth.desktop # lvnauth/snap/gui/lvnauth.desktop
    extensions: [gnome]
    plugs:
      - x11
      - audio-playback
      - home
      - removable-media
      - network
    environment:
      PYTHONPATH: "$PYTHONPATH:$SNAP/src:$SNAP/src/player:$SNAP/usr/lib/python3/dist-packages:$SNAP/usr/lib/python3.12:$SNAP/usr/lib/python3.12/lib-dynload"

    command-chain:
    - bin/debian-multiarch-triplet-provider-launch
    - bin/tcltk-launch

parts:

  # https://forum.snapcraft.io/t/the-debian-multiarch-triplet-provider-launch-stage-snap/11738
  debian-multiarch-triplet-provider-launch:
    plugin: nil
    stage-snaps:
    - debian-multiarch-triplet-provider-launch

  cpython:
    plugin: python
    python-packages:
       - Pillow == 11.1.0
       - pygame-ce == 2.5.3
       - pygubu == 0.36.3
       - screeninfo == 0.8.1
       - niquests == 3.13.1
    source: .
    stage-packages:
       - python3-tk
       - fontconfig-config
       - fonts-dejavu-core
       - fonts-dejavu-extra
       - locales-all
    organize:
      startup.py: bin/lvnauth

  lvnauth:
    plugin: dump
    source: https://github.com/jrezai/lvnauth.git
    source-type: git
    source-branch: main

  #Â https://forum.snapcraft.io/t/the-tcltk-launch-stage-snap/11740
  tcltk-launch:
    plugin: nil
    stage-snaps:
    - tcltk-launch

